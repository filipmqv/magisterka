<div class="wrap">
  <aside>
    <div class="container">
      <div ng-show="currentConversationId">
        <p>conversation ID:</p>
        <input type="text" ng-model="currentConversationId" class="form-control">
        <button class="btn btn-secondary" clipboard supported="supported" text="currentConversationId" on-copied="copySuccess()" on-error="copyFail(err)">Copy</button>
        <p>friends in conversation:</p>
        <ul ng-repeat="friendsList in friendsInConversations">
          <li ng-repeat="item in friendsList">
            {{item.username}}
          </li>
        </ul>
      </div>
      <div ng-hide="currentConversationId">
        <form>
          <input id="conversationIdInput" ng-model="conversationIdInput" type="text" class="form-control" autocomplete="off" placeholder="conversation ID">
          <button class="btn btn-secondary" ng-click="joinConversation()">Join</button>
          <button class="btn btn-secondary" ng-click="createNewConversation()">Create new</button>
        </form>
      </div>



      <!--myConversations<br>-->
      <!--{{myConversations}}-->
      <!--<br><br>-->
      <!--conversationsDhts<br>-->
      <!--{{dhtIdsInConversations}}-->
      <!--<br><br>-->
      <!--friendsInConversations<br>-->
      <!--{{friendsInConversations[currentConversationId]}}-->
      <!--<br><br>-->



      <button class="btn btn-secondary" ng-click="checkMessages()">check!</button>

      <br>

      <ul ng-repeat="m in my">
        <li>{{m.length}}</li>
      </ul>
      con
      <ul ng-repeat="m in con">
        <li>{{m.length}}</li>
      </ul>
      otCOn
      {{otherControl.length}}
      <br>
      ot
      {{ot.length}}
      <!--<ul ng-repeat="m in otherControl">-->
      <!--<li>{{m.length}}</li>-->
      <!--</ul>-->
      <!--ot-->
      <!--<ul ng-repeat="m in ot">-->
      <!--<li>{{m.length}}</li>-->
      <!--</ul>-->

      <p>Current user</p>
      <ul ng-repeat="(key, val) in currentUser">
        <li>{{key}}: {{val}}</li>
      </ul>
      <p>torrents {{getTorrents().length}}</p>
      <ul ng-repeat="torrent in getTorrents()">
        <li>{{torrent.infoHash}}</li>
      </ul>
      <br>

    </div>


  </aside>

  <article>
    <section class="conversation" scroll-glue>

      <section class="module">

        <!--todo wiadomość jako component-->
        <ol class="discussion" ng-repeat="item in getConversation() | orderBy:'message.timestamp'">
          <li ng-class="myDhtId===item.message.sender ? 'self' : 'other'">
            <div class="avatar">
              <img ng-src="images/avatar.gif" />
            </div>
            <div class="messages">
              <p>{{$index + 1}}&nbsp;&nbsp;&nbsp;{{item.message.content}}</p>
              <time ng-repeat="sentBy in friendsInConversations[currentConversationId] | filter:item.message.sender">{{sentBy.username}} • {{item.message.timestamp | date:'H:mm:ss'}}</time><br/>
              <time>{{truncate(item.infoHash)}} • {{truncate(item.message.previousInfoHash)}}</time>
            </div>
          </li>
        </ol>

      </section>

    </section>

    <div class="bottom-input">

      <div>

        <form class="send-message-form" role="form" ng-submit="sendMessage()">
          <div class="input-group">
            <input ng-model="textInput" type="text" class="form-control" id="inputMessage" placeholder="Type message..." autocomplete="off">
            <span class="input-group-btn">
              <button class="btn btn-secondary" type="submit">Send!</button>
            </span>
          </div>
        </form>

      </div>

    </div>
  </article>

</div>
